<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ejercicio SVG – Séptimo cuatrimestre</title>
  <style>
    :root {
      --bg: #0f172a;        /* slate-900 */
      --panel: #111827;     /* gray-900 */
      --text: #e5e7eb;      /* gray-200 */
      --accent: #22d3ee;    /* cyan-400 */
      --accent-2: #f59e0b;  /* amber-500 */
      --grid: #1f2937;      /* gray-800 */
      --stroke: #94a3b8;    /* slate-400 */
    }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      background: linear-gradient(180deg, var(--bg), #0b1023 50%, var(--bg));
      color: var(--text);
    }
    header {
      padding: 16px 20px;
      border-bottom: 1px solid #1f2937;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    header h1 {
      font-size: 18px;
      margin: 0;
      letter-spacing: 0.2px;
    }
    .container {
      max-width: 1080px;
      margin: 16px auto;
      padding: 0 16px 24px;
    }
    .panel {
      background: var(--panel);
      border: 1px solid #1f2937;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0,0,0,0.35);
    }
    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 12px;
      border-bottom: 1px solid #1f2937;
      background: rgba(255,255,255,0.02);
    }
    button, select {
      background: #0b1324;
      color: var(--text);
      border: 1px solid #243040;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 120ms ease, background 120ms ease, border 120ms ease;
    }
    button:hover, select:hover { transform: translateY(-1px); }
    button:active { transform: translateY(0); }
    .canvas-wrap {
      position: relative;
      background: #0b1324;
      padding: 12px;
    }
    svg {
      width: 100%;
      height: auto;
      display: block;
      background: #0b1324;
      border-radius: 10px;
      outline: 1px solid #1f2937;
    }
    /* Cuadrícula de fondo opcional */
    .grid {
      fill: url(#gridPattern);
    }
    /* Estilos de formas */
    .shape {
      stroke: var(--stroke);
      stroke-width: 2;
      transition: filter 160ms ease, transform 180ms ease, fill 160ms ease;
      cursor: pointer;
    }
    .shape:hover {
      filter: drop-shadow(0 2px 6px rgba(34,211,238,0.3));
    }
    .label {
      font-size: 14px;
      font-weight: 600;
      fill: #cbd5e1;
      pointer-events: none;
    }
    .note {
      padding: 12px;
      font-size: 14px;
      color: #cbd5e1;
      border-top: 1px solid #1f2937;
      background: rgba(255,255,255,0.02);
    }
    .footer {
      padding: 12px;
      font-size: 12px;
      color: #94a3b8;
      text-align: right;
    }
  </style>
</head>
<body>
  <header>
    <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
      <circle cx="12" cy="12" r="10" fill="none" stroke="#22d3ee" stroke-width="2"/>
      <path d="M6 12h12M12 6v12" stroke="#22d3ee" stroke-width="2" />
    </svg>
    <h1>Ejercicio interactivo con SVG</h1>
  </header>

  <div class="container">
    <div class="panel" role="region" aria-label="Lienzo SVG">
      <div class="toolbar" role="group" aria-label="Herramientas">
        <button id="toggleGrid">Mostrar/ocultar cuadrícula</button>
        <button id="animate">Animar formas</button>
        <button id="reset">Restablecer</button>
        <button id="download">Descargar SVG</button>

        <select id="colorPicker" title="Color de relleno">
          <option value="#22d3ee">Cyan</option>
          <option value="#f59e0b">Amber</option>
          <option value="#e11d48">Rose</option>
          <option value="#10b981">Emerald</option>
          <option value="#a78bfa">Violet</option>
        </select>
      </div>

      <div class="canvas-wrap">
        <!-- SVG Responsive -->
        <svg id="canvas" viewBox="0 0 800 450" aria-labelledby="svgTitle svgDesc" role="img">
          <title id="svgTitle">Lienzo con formas SVG</title>
          <desc id="svgDesc">Incluye cuadrícula, rectángulo, círculo, polígono y un path con curva; interactúa con clic y botones.</desc>

          <!-- Definición de patrón de cuadrícula -->
          <defs>
            <pattern id="gridPattern" width="20" height="20" patternUnits="userSpaceOnUse">
              <rect width="20" height="20" fill="#0b1324"/>
              <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1f2937" stroke-width="1"/>
              <path d="M 100 0 L 0 0 0 100" fill="none" stroke="#243040" stroke-width="1" opacity="0.4"/>
            </pattern>

            <!-- Degradado para el rectángulo -->
            <linearGradient id="gradRect" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#22d3ee"/>
              <stop offset="100%" stop-color="#a78bfa"/>
            </linearGradient>

            <!-- Sombra suave -->
            <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.35"/>
            </filter>
          </defs>

          <!-- Fondo de cuadrícula (apagado por defecto) -->
          <rect id="grid" class="grid" x="0" y="0" width="800" height="450" style="display:none"></rect>

          <!-- Formas principales -->
          <rect id="rect1" class="shape" x="60" y="60" width="200" height="120" rx="16" fill="url(#gradRect)" filter="url(#softShadow)"></rect>

          <circle id="circle1" class="shape" cx="420" cy="120" r="60" fill="#f59e0b"></circle>

          <polygon id="poly1" class="shape" points="620,70 700,140 600,160" fill="#22d3ee"></polygon>

          <!-- Path con curva (Cubic Bezier) -->
          <path id="path1" class="shape" d="M100,300 C220,220 380,380 520,300 S760,260 720,360"
                fill="none" stroke="#a78bfa" stroke-width="3"></path>

          <!-- Etiquetas -->
          <text x="70" y="55" class="label">Rectángulo (gradiente)</text>
          <text x="385" y="200" class="label">Círculo (clic para cambiar color)</text>
          <text x="580" y="50" class="label">Polígono (triángulo)</text>
          <text x="100" y="330" class="label">Path con curvas (C y S)</text>
        </svg>
      </div>


      <div class="footer">SVG responsive • Interactividad básica • Exportación</div>
    </div>
  </div>

  <script>
    const svg = document.getElementById('canvas');
    const grid = document.getElementById('grid');
    const shapes = Array.from(svg.querySelectorAll('.shape'));
    const colorPicker = document.getElementById('colorPicker');

    // Cambiar color al hacer clic
    shapes.forEach(el => {
      el.addEventListener('click', () => {
        if (el.tagName.toLowerCase() === 'path') {
          el.setAttribute('stroke', colorPicker.value);
        } else {
          el.setAttribute('fill', colorPicker.value);
        }
      });
    });

    // Mostrar / ocultar cuadrícula
    document.getElementById('toggleGrid').addEventListener('click', () => {
      grid.style.display = grid.style.display === 'none' ? 'block' : 'none';
    });

    // Animar formas (transformaciones simples)
    let animating = false;
    let frame = 0;
    document.getElementById('animate').addEventListener('click', () => {
      animating = !animating;
      if (animating) requestAnimationFrame(tick);
    });
    function tick() {
      if (!animating) return;
      frame += 1;

      // Oscilación suave con seno
      const offset = Math.sin(frame / 30) * 8;

      // Rectángulo: traslación Y
      const rect = document.getElementById('rect1');
      rect.setAttribute('transform', `translate(0, ${offset})`);

      // Círculo: escala
      const circle = document.getElementById('circle1');
      const scale = 1 + Math.sin(frame / 40) * 0.08;
      circle.setAttribute('transform', `translate(420,120) scale(${scale}) translate(-420,-120)`);

      // Polígono: rotación
      const poly = document.getElementById('poly1');
      const rot = Math.sin(frame / 25) * 6;
      poly.setAttribute('transform', `rotate(${rot}, 650, 120)`);

      // Path: grosor
      const path = document.getElementById('path1');
      const width = 3 + Math.sin(frame / 35);
      path.setAttribute('stroke-width', width.toFixed(2));

      requestAnimationFrame(tick);
    }

    // Restablecer
    document.getElementById('reset').addEventListener('click', () => {
      animating = false;
      frame = 0;
      grid.style.display = 'none';
      shapes.forEach(el => {
        el.removeAttribute('transform');
      });
      // Colores por defecto
      document.getElementById('rect1').setAttribute('fill', 'url(#gradRect)');
      document.getElementById('circle1').setAttribute('fill', '#f59e0b');
      document.getElementById('poly1').setAttribute('fill', '#22d3ee');
      document.getElementById('path1').setAttribute('stroke', '#a78bfa');
      document.getElementById('path1').setAttribute('stroke-width', 3);
    });

    // Descargar SVG
    document.getElementById('download').addEventListener('click', () => {
      const serializer = new XMLSerializer();
      const source = serializer.serializeToString(svg);
      const blob = new Blob([source], { type: 'image/svg+xml;charset=utf-8' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = 'ejercicio-svg.svg';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });
  </script>
</body>
</html>

